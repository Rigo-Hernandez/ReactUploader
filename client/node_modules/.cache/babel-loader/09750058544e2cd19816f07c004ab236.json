{"ast":null,"code":"var crypto = require('crypto');\n\nvar _require = require('./utilities'),\n    debugLog = _require.debugLog;\n/**\n * memHandler - In memory upload handler\n * @param {Object} options\n * @param {String} fieldname\n * @param {String} filename\n * @returns {Object}\n */\n\n\nmodule.exports = function (options, fieldname, filename) {\n  var buffers = [];\n  var fileSize = 0; // eslint-disable-line\n\n  var hash = crypto.createHash('md5');\n\n  var getBuffer = function getBuffer() {\n    return Buffer.concat(buffers);\n  };\n\n  var emptyFunc = function emptyFunc() {\n    return '';\n  };\n\n  return {\n    dataHandler: function dataHandler(data) {\n      buffers.push(data);\n      hash.update(data);\n      fileSize += data.length;\n      debugLog(options, \"Uploading \".concat(fieldname, \" -> \").concat(filename, \", bytes: \").concat(fileSize));\n    },\n    getBuffer: getBuffer,\n    getFilePath: emptyFunc,\n    getFileSize: function getFileSize() {\n      return fileSize;\n    },\n    getHash: function getHash() {\n      return hash.digest('hex');\n    },\n    complete: getBuffer,\n    cleanup: emptyFunc\n  };\n};","map":null,"metadata":{},"sourceType":"script"}